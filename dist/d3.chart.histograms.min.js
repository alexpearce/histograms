/* d3.chart.histograms 22-04-2014 */
!function(a){"use strict";a.chart("BaseChart",{initialize:function(){var a=this;a.margins={top:10,bottom:40,left:50,right:10,padding:10},a._width=a.base.attr("width")?a.base.attr("width")-(a.margins.right+a.margins.left):200,a._height=a.base.attr("height")?a.base.attr("height")-(a.margins.top+a.margins.bottom):200,a.updateContainerWidth(),a.updateContainerHeight(),a.base.append("g").attr("transform","translate("+this.margins.left+","+this.margins.top+")"),a.areas={},a.layers={}},width:function(a){if(0===arguments.length)return this._width;var b=this._width;return this._width=a,this.updateContainerWidth(),this.trigger("change:width",a,b),this},height:function(a){if(0===arguments.length)return this._height;var b=this._height;return this._height=a,this.updateContainerHeight(),this.trigger("change:height",a,b),this},updateContainerWidth:function(){this.base.attr("width",this._width+this.margins.left+this.margins.right)},updateContainerHeight:function(){this.base.attr("height",this._height+this.margins.top+this.margins.bottom)}})}(window.d3),function(a,b){"use strict";a.chart("BaseChart").extend("AxesChart",{initialize:function(){var b=this;b.base.classed("AxesChart"),b.xScale=a.scale.linear().range([0,b.width()]),b.yScale=a.scale.linear().range([b.height(),0]);var c=b.base.select("g");b.areas.xgrid=c.append("g").classed("x grid",!0).attr("transform","translate(0,"+b.height()+")"),b.areas.ygrid=c.append("g").classed("y grid",!0),b.areas.xaxis=c.append("g").classed("x axis",!0).attr("transform","translate(0,"+b.height()+")"),b.areas.yaxis=c.append("g").classed("y axis",!0),b.on("change:width",function(){b.xScale.range([0,b.width()])}),b.on("change:height",function(){b.yScale.range([b.height(),0]),b.areas.xaxis.attr("transform","translate(0,"+b.height()+")"),b.areas.xgrid.attr("transform","translate(0,"+b.height()+")")})},drawAxes:function(c){c===b&&(c=!1);var d=this;if(d.layers.xaxis=a.svg.axis().ticks(5).scale(d.xScale).orient("bottom"),d.layers.xgrid=a.svg.axis().ticks(5).scale(d.xScale).orient("bottom").tickSize(-d.height(),0,0).tickFormat(""),d.layers.yaxis=a.svg.axis().ticks(5).scale(d.yScale).orient("left"),d.layers.ygrid=a.svg.axis().ticks(5).scale(d.yScale).orient("left").tickSize(-d.width(),0,0).tickFormat(""),c===!0){var e=d.base.transition().duration(250);e.select(".x.axis").call(d.layers.xaxis),e.select(".x.grid").call(d.layers.xgrid),e.select(".y.axis").call(d.layers.yaxis),e.select(".y.grid").call(d.layers.ygrid)}else d.areas.xaxis.call(d.layers.xaxis),d.areas.xgrid.call(d.layers.xgrid),d.areas.yaxis.call(d.layers.yaxis),d.areas.ygrid.call(d.layers.ygrid)}})}(window.d3),function(a){"use strict";a.chart("AxesChart").extend("Histogram",{initialize:function(){var a=this;a.base.classed("Histogram");var b=a.base.select("g");a.layers.bars=b.append("g").classed("bars",!0),a.layer("bars",a.layers.bars,{dataBind:function(a){return this.selectAll("rect").data(a)},insert:function(){return this.append("rect").classed("bar",!0)},events:{enter:function(){return this.attr("width",function(b){return a.xScale(b.dx)-a.xScale(b.x)}).attr("height",function(){return 0}).attr("x",function(b){return a.xScale(b.x)}).attr("transform","translate(0, "+a.height()+")")},"enter:transition":function(){var a=this.chart();this.duration(250).attr("height",function(b){return a.height()-a.yScale(b.y)}).attr("transform",function(b){return"translate(0, "+a.yScale(b.y)+")"})},update:function(){return this},"update:transition":function(){return this.attr("width",function(b){return a.xScale(b.dx)-a.xScale(b.x)}).attr("x",function(b){return a.xScale(b.x)})}}})},transform:function(b){var c=this;c.data=b;var d=b[0],e=b[b.length-1];c.xScale.domain([d.x,e.dx]);{var f=a.extent(b,function(a){return a.y});f[0]>0?0:f[0]}return c.yScale.domain([f[0],1.05*f[1]]),c.drawAxes(),b}})}(window.d3),function(a){"use strict";a.chart("Histogram").extend("HistogramZoom",{initialize:function(){var b=this,c=b.base.append("defs").append("clipPath").attr("id","chartArea").append("rect").attr("width",b.width()).attr("height",b.height());b.layers.bars.attr("clip-path","url(#chartArea)");var d=function(a){b.xScale.domain(a),b.drawAxes(!0),b.layers.bars.draw(b.data)},e=a.svg.brush().x(b.xScale).on("brush",function(){var a=e.extent();b.layers.bars.selectAll("rect").classed("selected",function(b){var c=a[0]<=b.x&&b.x<=a[1],d=a[0]<=b.dx&&b.dx<=a[1];return c||d})}).on("brushend",function(){if(e.empty()!==!0){var a=b.base.select(".clear-button");if(a.empty()===!0){b.xScale.originalDomain=b.xScale.domain();var c=b.base.append("g").classed("clear-button",!0).attr("transform","translate("+(b.width()-b.margins.left)+","+b.margins.top+")");c.append("rect").attr("width",100).attr("height",40).attr("rx",2).attr("ry",2),c.append("text").attr("x",10).attr("y",25).text("Clear zoom"),c.on("click",function(){b.base.select(".brush").call(e.clear()),d(b.xScale.originalDomain),c.remove()})}d(e.extent()),b.layers.bars.selectAll("rect").classed("selected",!1),b.base.select(".brush").call(e.clear())}});b.areas.brush=b.base.append("g").classed("brush",!0).attr("transform","translate("+b.margins.left+", "+b.margins.top+")"),b.areas.brush.call(e).selectAll("rect").attr("height",b.height()),b.on("change:height",function(){c.attr("height",b.height()),b.areas.brush.call(e).selectAll("rect").attr("height",b.height())}),b.on("change:width",function(){c.attr("width",b.width())})}})}(window.d3);